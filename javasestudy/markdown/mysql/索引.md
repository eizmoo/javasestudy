### 为什么是B+

- 所有叶子节点存放数据，非叶子节点存放目录项
- 层数非常低，因为每一个非叶子节点都可以存放很多个目录页。查询时只需要几次磁盘IO就可以查到
- 叶子节点各数据页之间维护双向链表，范围查询速度极快

### 什么样的sql走索引

- 全值匹配(最左匹配原则)
- like只有右模糊走索引
- 范围值可以匹配，但是可能会查到大量数据进行回表，根据优化原则将导致直接全表扫描
- 排序可以走索引，但是要符合最左原则(优先匹配where语句的字段)
- 如果多排序字段asc和desc混用，将直接全表
- 分组只要符合最左原则即可走索引

### 索引的代价

- 空间：非聚簇索引是额外的B+树，叶子节点存放索引列和id。id用于回表查询聚簇索引。
- 时间：对数据的增删改查意味着非聚簇索引也需要变化

### 索引注意点

- 主键最好递增。如果主键在中间，可能会引起页分裂(因为聚簇索引是根据主键)
- 只为搜索、排序或分组的列创建索引
- 为基数(差异度)大的列创建索引
- 列类型尽量小，太大会应向查询速度
- 可以对字符串值前缀建立索引(有计算公式查询差异度)
- 尽量使用覆盖索引，避免回表
- 即时清除冗余索引