# 五种数据结构
1. string
   - 最基础的字符串类型，一个key对应一个value
   - 最大可存储512M的值

2. list

   - k对应一个list
   - 按照插入顺序排序，可以添加一个元素到列表头或列表尾
   - 通过lpush和lrange操作

3. hash

   - string类型的field和value的映射表

     ![](https://images2018.cnblogs.com/blog/1368782/201808/1368782-20180821202632663-939669694.png)



4. set
   - 通过hashtable实现，概念类似于集合，可以进行交集、并集、差集
   - 元素无序，增增删查速度为O(1)
5. zset
   - 可排序的set，用户提供一个优先级score参数，插入是按照score从小到大的顺序排序

![](C:\Users\dataqin\Desktop\1565248142087.png)



# Redis为什么这么快

redis是基于内存的单进程单线程模型的KV型数据库，官方提供的数据是可以达到100000+的QPS（每秒内查询次数）。

原因：

1. 纯内存操作
2. 结构简单，对数据的操作也十分简单
3. 单线程，避免了上下文切换和竞争条件，也不会因为切换而消耗CPU，不需要考虑锁的问题
4. 多路IO复用模型，非阻塞IO
5. 自己构建了通信协议

# Redis分布式锁

setnx方法可以原子性的设置锁，如果设置成功证明获取锁，否则证明锁已存在。

之所以不采用先get再set是因为无法保障原子性.

但是自己维护锁的超时时间可能出现业务处理时间超过锁的有效时间的场景，从而导致并发。

reidsson提供了redis锁，通过看门狗机制保持redis的时间